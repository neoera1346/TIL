# Session

세션 기반 인증에서 `유저 인증정보`는 더이상 쿠키에 담기지 않고 각각의 `세션 객체`에 저장되며, 사용자의 정보 중 보안상 중요한 데이터는 서버사이드에서 관리한다.

`유저 인증정보`를 저장하고 나면, 서버는 매 요청마다 해당되는 세션 객체에 저장된 `유저 인증정보`를 바탕으로 인증이 필요한 요청이 들어오면 이전에 인증된 유저의 요청인지 **검증**할 수 있다.

- **세션 기반 인증에서 쿠키는 인증정보 대신 세션 아이디를 저장한다.**

서버는 로그아웃 요청을 반드시 필요로 한다.

- **세션 ID가 담긴 쿠키는 탭을 닫으면 삭제되지만 유효기간이 따로 정해져 있지는 않다. 보안 상의 이유로, 서버에서 세션을 파괴하는 과정이 반드시 필요하다.**

# Session Flow

사용자 로그인 → 서버는 이 사용자의 정보를 가지고 존재하는 사용자인지 확인 → 존재하는 경우 고유한 세션 ID 생성 & 매핑 정보 저장 → Client에 세션 ID를 쿠키로 저장하도록 전달 → 이후 Client에서 요청 발생 → 서버는 Request Header의 쿠키 정보(세션 ID)를 확인하고 세션 ID와 매핑되는 ID의 사용자로 인식한다.

# Express-Session

세션을 위한 미들웨어로, `Express`에서 세션을 다룰 수 있는 공간을 보다 쉽게 만들어준다.

Express-Session 모듈을 사용하면 `req.session`이 세션 객체이며 이는 세션 객체에 세션 데이터를 저장하거나 불러오기 위해 사용한다.

---

# Useful Links

- [Expressjs - Session](https://github.com/expressjs/session)

  - 세션 객체에 값을 담거나, 값을 불러오거나, 세션을 파괴하는 법을 참고할 수 있다.
